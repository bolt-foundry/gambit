"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useImperativeLoadableField = useImperativeLoadableField;
const react_disposable_state_1 = require("@isograph/react-disposable-state");
function useImperativeLoadableField(loadableField) {
    const { state, setState } = (0, react_disposable_state_1.useUpdatableDisposableState)();
    return {
        loadFragmentReference: (args, fetchOptions) => {
            const [_id, loader] = loadableField(args, fetchOptions !== null && fetchOptions !== void 0 ? fetchOptions : {});
            setState(loader());
        },
        fragmentReference: state !== react_disposable_state_1.UNASSIGNED_STATE ? state : null,
    };
}
